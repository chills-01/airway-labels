# airway-labels
## Introduction:
This is a command line application that automatically labels the first few layers of a centreline tree generated by the image software Avizo. It utilises a geometric approach to the navigation of the tree and subsequent labelling. This algorithm is designed to be replaced with a machine learning algorithm, but training of this requires more data than what is accessible at this time. Anatomical labelling follows the following figure. 

![image](https://user-images.githubusercontent.com/58355760/110749894-cdd5a200-8295-11eb-9b9f-d52084cad033.png)

## Using this Application
The packages required for this program are detailed in `req.txt`. If using `anaconda` to manage python environments, the following command can be used to set up an environment to run this application:  
`conda create --name <env_name> -f req.txt`

Running of the application is complete from the command line, using the python3 environment created earlier. The program requires two input files: an `.mv3d` file output from Avizo and a flow file detailing the hierarchical structure of a generated centreline tree. These are referenced by the tags `--mv3d_file` and `--flow_file`.  

`python3 /path/to/airway-labels/main.py --mv3d_file /path/to/.mv3d --flow_file /path/to/flow_file`  

There is also an optional argument `--title` for labelling the output table in the excel file. If no `title` is entered, the program obtains the name of the run from the `flow_file` name. Enter the help `-h` tag for more information.

Once run, the program writes a new excel file with all anatomical labels specified in a table to the current working directory.

## Future Improvements

This project is able to be continuously improved into the future. Some main capabilities intended to be expanded upon are as follows:
- Machine Learning approach to the anatomical leblling: will improve the accuracy, detail and scalability of this application
- Output file writing and handling:
    - Specify an output directory and filename
    - Cascade multpiple runs to the same output excel file
